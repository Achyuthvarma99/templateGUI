trigger:
  - master

variables:
  tag: '$(Build.BuildId)'
  dockerConnection: '5f10f1d5-c7b4-4fba-a476-eb796807eb5c'

# 🛠️ Use your custom self-hosted agent pool
pool:
  name: DevPool-agent
  demands:
    - agent.name -equals DevPool-agent

steps:
- task: Docker@2
  displayName: Build and Push Docker image
  inputs:
    command: buildAndPush
    repository: devtest12346.azurecr.io/templategui-app
    dockerfile: '**/Dockerfile'
    tags: |
      $(tag)
      latest
    containerRegistry: acr-docker  # 🧠 This must match your Service Connection name
