trigger:
- master

variables:
  tag: '$(Build.BuildId)'
  dockerConnection: '5f10f1d5-c7b4-4fba-a476-eb796807eb5c'

pool:
  vmImage: ubuntu-latest

steps:
- task: Docker@2
  displayName: Build and Push Docker image
  inputs:
    command: buildAndPush
    repository: devtest12346.azurecr.io/templategui-app
    dockerfile: '**/Dockerfile'
    tags: |
      $(tag)
      latest
    containerRegistry: acr-docker  # ‚Üê must exactly match service connection name
